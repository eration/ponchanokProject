<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *; img-src * data:" />

    <link rel="stylesheet" type="text/css" href="jqm/jquery.mobile.flatui.css" />
    <link rel="stylesheet" type="text/css" href="jqm/jquery.mobile.datepicker.css" />
    <link rel="stylesheet" type="text/css" href="jqm/jquery.mobile.datepicker.theme.css" />

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="jqm/jquery-1.11.3.min.js"></script>
    <script type="text/javascript" src="jqm/jquery.mobile-1.4.5.min.js"></script>
    <script type="text/javascript" src="jqm/datepicker.js"></script>
    <script type="text/javascript" src="jqm/jquery.mobile.datepicker.js"></script>
    <script type="text/javascript" src="jqm/jquery.touchSwipe.min.js"></script>
    <script>
      var db;
      var rows;

      document.addEventListener("deviceready", onDeviceReady, false);

      function onDeviceReady() {
        db = window.openDatabase("TheGarage", "1.0", "Daily The Garage", 1024*1024);
        console.log("create DB");
        db.transaction(createTable, _onError, _onSuccess);
        console.log("create Table");
      }
      function createTable(tx){
//        tx.executeSql("DROP TABLE IF EXISTS tbCar");
         var sql = "CREATE TABLE IF NOT EXISTS tbCar (" +
             "id INTEGER PRIMARY KEY AUTOINCREMENT," +
             "namepc VARCHAR(50), " +
             "numpc VARCHAR(10), "+
             "addpc VARCHAR(50), "+
             "pic_url VARCHAR(100),"+
             "brand VARCHAR(10), " +
             "gen VARCHAR(10), " +
             "corc VARCHAR(10), " +
             "yout VARCHAR(4), " +
             "numc VARCHAR(7), " +
             "car_date VARCHAR(20)," +
             "price INTEGER," +
             "itotal INTEGER," +
             "chack VARCHAR(1)," +
             "pic_url1 VARCHAR(100),"+
             "pic_url2 VARCHAR(100),"+
             "pic_url3 VARCHAR(100),"+
             "pic_url4 VARCHAR(100),"+
             "pic_url5 VARCHAR(100),"+
             "no_chack INTEGER,"+
             "payDate varchar(100)"+
             ")";
         tx.executeSql(sql);
         checkPayDate(tx);
         createPayTable(tx);
      }

        function createPayTable(tx){
          // tx.executeSql("DROP TABLE IF EXISTS tbPay");
            var sql = "CREATE TABLE IF NOT EXISTS tbPay ("+
                "id integer primary key autoincrement," +
                "carId integer,"+
                "payDate varchar(50),"+
                "assignDate varchar(50),"+
                "chack varchar(10)"+
                ")";
            tx.executeSql(sql,[],function(){},function(){console.log("error table pay")});
        }

      function checkPayDate(tx){
        var sql = "select * from tbCar";
        tx.executeSql(sql,[],function(tx,result){
          var len = result.rows.length;
          for (var i=0;i<len;i++) {
            var rec = result.rows.item(i);
            var payDate = new Date(Number(rec.payDate));
            var currentDate = new Date();
            var currentTimeStamp = currentDate.getTime();
            var payTimeStamp = payDate.getTime();
            if (currentTimeStamp >= payTimeStamp && rec.chack != 2) {
              var newPayDate = payTimeStamp + 2592000000 ;
              var sql = "update tbCar set chack = 3 , no_chack = ? , payDate = ? where id = ?";
              var paySql = "insert into tbPay(carId,payDate,assignDate,chack) values (?,?,?,3)";
              var no_chack = rec.no_chack + 1;
              tx.executeSql(paySql,[rec.id,currentTimeStamp,(payDate.getMonth()+1)]);
              tx.executeSql(sql,[no_chack,newPayDate,rec.id],function(){
                console.log("numc : " + rec.numc + " ขาดจ่าย");
              },function(){
                console.log("ขาดจ่ายออโต้ error");
              });
            }
          }
        });
      }

      function _onError(tx, error) {
          alert("DB Error: " + error);
      }

      function _onSuccess() {
        // alert("Create database success...");
        console.log("Create table Success");
      }

      function uploadPhoto(imageURI) {
          $(picInput).val(imageURI);
      }
      var picInput;
      function browsePhoto(picUrl) {
        picInput = picUrl;
        navigator.camera.getPicture(uploadPhoto, function (message) {
          alert('get pic error');
        },  {
          quality: 50,
          sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY,
          destinationType: navigator.camera.DestinationType.FILE_URI
        });
      }

      function insertNewUser() {
          var namepc = $("#namepc").val();
          var numpc = $("#numpc").val();
          var addpc = $("#addpc").val();
          var pic = $("#picUrl").val();
          var brand = $("#brand").val();
          var gen = $("#gen").val();
          var corc = $("#corc").val();
          var yout = $("#yout").val();
          var numc = $("#numc").val();
          var cardate = new Date();
          cardate = cardate.getTime();
          var price = $("#price").val();
          var itotal = $("#itotal").val();
          var pic1 = $("#picUrl1").val();
          var pic2 = $("#picUrl2").val();
          var pic3 = $("#picUrl3").val();
          var pic4 = $("#picUrl4").val();
          var pic5 = $("#picUrl5").val();
          console.log("namepc " + namepc);
          console.log("numpc " + numpc);
          console.log("addpc " + addpc);
          console.log("pic " + pic);
          console.log("brand " + brand);
          console.log("gen " + gen);
          console.log("corc " + corc);
          console.log("yout " + yout);
          console.log("numc " + numc);
          console.log("cardate " + cardate);
          console.log("price " + price);
          console.log("itotal " + itotal);
          console.log("pic1 " + pic1);
          console.log("pic2 " + pic2);
          console.log("pic3 " + pic3);
          console.log("pic4 " + pic4);
          console.log("pic5 " + pic5);
          if (namepc == "" || numpc == "" || addpc == "" || pic == "" || brand == "" || gen == "" || corc == "" || yout == "" || numc == "" ) {
            alert("กรุณากรอกข้อมูลให้ครบถ้วน");
          } else if (cardate == "" || price == "" || itotal == "" || pic1 == "" || pic2 == "" || pic3 == "" || pic4 == "" || pic5 == "") {
             alert("กรุณากรอกข้อมูลให้ครบถ้วน");
          } else if (numpc.length != 10 && numpc.length != 9) {
            alert("กรุณากรอกเบอร์โทรศัพท์ให้ถูกต้อง");
          } else if (numpc[0] != '0') {
            alert("เบอร์โทรศัพต้องขึ้นต้นด้วย 0");
          } else if (numc.length < 3) {
            alert("เลขทะเบียนรถต้องมี 3 - 7 ตัว");
          } else {
              var currentDate = new Date();
              currentDate = currentDate.getTime();
              var payDate = currentDate + 2592000000;
            db.transaction(function(tx){
                tx.executeSql("INSERT INTO tbCar (namepc, numpc,addpc,pic_url, brand, gen, corc,yout, numc, car_date, price,itotal,pic_url1,pic_url2,pic_url3,pic_url4,pic_url5,payDate) VALUES (?,?,?,?,?,?,?,?, ?, ?,?, ?, ?, ?,?,?,?,? )",[namepc, numpc, addpc,pic,brand, gen, corc, yout, numc, cardate, price,itotal,pic1,pic2,pic3,pic,pic5,payDate],
                function(tx, result){
                     alert("Insert record success...");
                     console.log("insert record");
                     $("#namepc").val("");
                     $("#numpc").val("");
                     $("#addpc").val("");
                     $("#picUrl").val("");
                     $("#brand").val("");
                     $("#gen").val("");
                     $("#corc").val("");
                     $("#yout").val("");
                     $("#numc").val("");
                     $("#cardate").val("");
                     $("#price").val("");
                     $("#itotal").val("");
                     $("#picUrl1").val("");
                     $("#picUrl2").val("");
                     $("#picUrl3").val("");
                     $("#picUrl4").val("");
                     $("#picUrl5").val("");
                   }, function(){
                     alert("insert Error");
                   });
            }, function(){
              alert("insert Error around");
            });
          }
     }
     function listCar() {
         db.transaction(function(tx){
            tx.executeSql("SELECT * FROM tbCar", [], showCarList, _onError);
         }, _onError);
     }
     function showCarList(tx, result) {
         rows = [];
         var len = result.rows.length;
         var listContent = "";
         $("#listCar").empty();
         for (var i=0; i< len;i++)
             {
                 var rec = result.rows.item(i);
                 var car_date = new Date(Number(rec.car_date));
                 car_date = (car_date.getMonth()+1)+"/"+car_date.getDate()+"/"+car_date.getFullYear();
                 if (rec.no_chack >= 4 && rec.chack == 3) {
                    listContent += '<li>' + '<a href = "#">' +'<h3 class = "ui-li-heading">' + car_date + ' ยึดรถ</h3>' + '<p class = "ui-li-desc">' +'ชื่อ '+ rec.namepc +' เบอร์โทรศัพท์ '+rec.numpc+' ที่อยู่ '+rec.addpc+ '<br/>' +' ยี่ห้อ ' +rec.brand + ' รุ่น ' +rec.gen +'<br>'+' สี ' +rec.corc +' ปีที่ออก '+rec.yout+' เลขทะเบียน ' +rec.numc +' ราคาจำนำ ' +rec.price +' บาท ' +'</p></a></l>';
                 } else if (rec.chack == 2) {
                   listContent += '<li>' + '<a href = "#">' +'<h3 class = "ui-li-heading">' + car_date + ' ไถ่รถคืน</h3>' + '<p class = "ui-li-desc">' +'ชื่อ '+ rec.namepc +' เบอร์โทรศัพท์ '+rec.numpc+' ที่อยู่ '+rec.addpc+ '<br/>' +' ยี่ห้อ ' +rec.brand + ' รุ่น ' +rec.gen +'<br>'+' สี ' +rec.corc +' ปีที่ออก '+rec.yout+' เลขทะเบียน ' +rec.numc +' ราคาจำนำ ' +rec.price +' บาท ' +'</p></a></l>';
                 } else {
                   listContent += '<li>' + '<a href = "#" onclick="Edit(' + i + ');">' +'<h3 class = "ui-li-heading">' + car_date + '</h3>' + '<p class = "ui-li-desc">' +'ชื่อ '+ rec.namepc +' เบอร์โทรศัพท์ '+rec.numpc+' ที่อยู่ '+rec.addpc+ '<br/>' +' ยี่ห้อ ' +rec.brand + ' รุ่น ' +rec.gen +'<br>'+' สี ' +rec.corc +' ปีที่ออก '+rec.yout+' เลขทะเบียน ' +rec.numc +' ราคาจำนำ ' +rec.price +' บาท ' +'</p></a></l>';
                 }

                 rows.push(rec);
             }
         $("#listCar").append(listContent);
         $("#listCar").listview().listview("refresh");
         $.mobile.changePage("#ALLcar",{transition: "slide"});
       }
       function calPrice(item,elementId) {
         console.log('elementId ' + elementId);
         var myPrice = $(item).val();
         if (!$.isNumeric(myPrice) && myPrice != "") {
           alert("กรุณากรอกเป็นตัวเลข");
           $(item).val("");
         } else if (myPrice <= 0) {
           alert("จำนวนไม่เงินไม่สามารถต่ำกว่า 1 บาทได้");
           $(item).val("");
         } else {
           price = myPrice;
           itotal = (price * 6)/100;
           $(elementId).val(itotal);
         }
       }

       function listCars() {
           $("#busy").show();
           db.transaction(function(tx){
              tx.executeSql("SELECT * FROM tbCar", [], showCarLists, _onError);
           }, _onError);

           $.mobile.changePage("#previewcar",{transition: "slide"});
       }
       function showCarLists(tx, result) {
            $("#busy").hide();
           rows = [];
           var len = result.rows.length;
           var listContent = "";
           $("#listCars").empty();
           for (var i=0; i< len;i++)
               {
                   var rec = result.rows.item(i);
                   var car_date = new Date(Number(rec.car_date));
                   car_date = (car_date.getMonth()+1)+"/"+car_date.getDate()+"/"+car_date.getFullYear();
                   if (rec.no_chack == 4 && rec.chack == 3) {
                     listContent += '<li>' + '<a href = "#">' +'<h3 class = "ui-li-heading">' + car_date + ' ยึดรถ</h3>' + '<p class = "ui-li-desc">' +'ชื่อ'+ rec.namepc +'<br/>' +' ยี่ห้อ ' +rec.brand + ' รุ่น ' +rec.gen +'<br>'+' สี ' +rec.corc +' ปีที่ออก '+rec.yout+' เลขทะเบียน ' +rec.numc +' ราคาจำนำ ' +rec.price +' บาท ' +'</p></a></l>';
                   } else if (rec.chack == 2) {
                     listContent += '<li>' + '<a href = "#"">' +'<h3 class = "ui-li-heading">' + car_date + ' ไถ่รถคืน</h3>' + '<p class = "ui-li-desc">' +'ชื่อ'+ rec.namepc +'<br/>' +' ยี่ห้อ ' +rec.brand + ' รุ่น ' +rec.gen +'<br>'+' สี ' +rec.corc +' ปีที่ออก '+rec.yout+' เลขทะเบียน ' +rec.numc +' ราคาจำนำ ' +rec.price +' บาท ' +'</p></a></l>';
                   } else {
                     listContent += '<li>' + '<a href = "#" onclick="pcar(' + i + ');">' +'<h3 class = "ui-li-heading">' + car_date + '</h3>' + '<p class = "ui-li-desc">' +'ชื่อ'+ rec.namepc +'<br/>' +' ยี่ห้อ ' +rec.brand + ' รุ่น ' +rec.gen +'<br>'+' สี ' +rec.corc +' ปีที่ออก '+rec.yout+' เลขทะเบียน ' +rec.numc +' ราคาจำนำ ' +rec.price +' บาท ' +'</p></a></l>';
                   }
                   rows.push(rec);
               }
           $("#listCars").append(listContent);
           $("#listCars").listview().listview("refresh");
           $.mobile.changePage("#previewcar",{transition: "slide"});

       }
       function listUsers() {
           $("#busy").show();
           db.transaction(function(tx){
              tx.executeSql("SELECT * FROM tbCar", [], showUserLists, _onError);
           }, _onError);

           $.mobile.changePage("#previewuser",{transition: "slide"});
       }
       function showUserLists(tx, result) {
            $("#busy").hide();
           rows = [];
           var len = result.rows.length;
           var listContent = "";
           $("#listUsers").empty();
           for (var i=0; i< len;i++)
               {
                   var rec = result.rows.item(i);
                   var car_date = new Date(Number(rec.car_date));
                   car_date = (car_date.getMonth()+1)+"/"+car_date.getDate()+"/"+car_date.getFullYear();
                   listContent += '<li>' + '<a href = "#" onclick="puser(' + i + ');">' +'<h3 class = "ui-li-heading">' + car_date + '</h3>' + '<p class = "ui-li-desc">' +'ชื่อ'+ rec.namepc +' เบอร์โทรศัพท์ '+rec.numpc+' ที่อยู่ '+rec.addpc+ '</p></a>' +'<a href = "#" data-icon="minus" onclick = "deleteCar(' + i + '); "></a>' +'</l>';
                   rows.push(rec);
               }
           $("#listUsers").append(listContent);
           $("#listUsers").listview().listview("refresh");
           $.mobile.changePage("#previewuser",{transition: "slide"});

       }
       function deleteCar(index) {
           var namepc = rows[index].namepc;
           var numpc = rows[index].numpc;
           var addpc = rows[index].addpc;
           var pic = rows[index].pic_url;
           var brand = rows[index].brand;
           var gen = rows[index].gen;
           var corc = rows[index].corc;
           var yout = rows[index].yout;
           var numc = rows[index].numc;
           var car_date = new Date(Number(rec.car_date));
           car_date = (car_date.getMonth()+1)+"/"+car_date.getDate()+"/"+car_date.getFullYear();
           var cardate = car_date;
           var price = rows[index].price;
           var pic1 = rows[index].pic_url1;
           var pic2 = rows[index].pic_url2;
           var pic3 = rows[index].pic_url3;
           var pic4 = rows[index].pic_url4;
           var pic5 = rows[index].pic_url5;
           var id = rows[index].id;
           var r = confirm("Are you sure?");
           if (r == true) {
               db.transaction(function(tx) {
               tx.executeSql("DELETE FROM tbCar WHERE id =? ", [id], function(tx, result) {
                   alert("Delete record success...");
                   listCar();
               }, _onError);
           }, _onError);

           } else {
           }
       }

       function searchCar() {
         var cardate = $("#searchNumC").val();
         if (cardate.length > 0 ){
           db.transaction(function(tx){
             tx.executeSql("SELECT * FROM tbCar WHERE numc = ?", [cardate], showcarsearch, _onError);
           }, _onError);
         } else {
           alert("กรุณาใส่ข้อมูลให้ครบถ้วน ");
         }
       }

       function showcarsearch(tx, result) {
         rows = [];
         var len = result.rows.length;
         var searchContent = "";
         $("#searchCar").empty();
         for (var i=0; i< len;i++) {
           var rec = result.rows.item(i);
           var car_date = new Date(Number(rec.car_date));
           car_date = (car_date.getMonth()+1)+"/"+car_date.getDate()+"/"+car_date.getFullYear();
           if (rec.chack == 2) {
             searchContent += '<li>' + '<a href = "#">' +'<h3 class = "ui-li-heading">' + car_date + ' ไถ่คืนแล้ว</h3>' + '<p class = "ui-li-desc">' +'ชื่อ'+ rec.namepc + ' เบอร์โทรศัพท์ ' +rec.numpc+' ยี่ห้อ ' +rec.brand + ' รุ่น ' +rec.gen +'<br>'+' สี ' +rec.corc +' เลขทะเบียน ' +rec.numc +' ราคาจำนำ ' +rec.price +' บาท ' +'</p></a>'+'</l>';
           } else if (rec.chack == 3 && rec.no_chack >= 4) {
             searchContent += '<li>' + '<a href = "#">' +'<h3 class = "ui-li-heading">' + car_date + ' ยึดรถ</h3>' + '<p class = "ui-li-desc">' +'ชื่อ'+ rec.namepc + ' เบอร์โทรศัพท์ ' +rec.numpc+' ยี่ห้อ ' +rec.brand + ' รุ่น ' +rec.gen +'<br>'+' สี ' +rec.corc +' เลขทะเบียน ' +rec.numc +' ราคาจำนำ ' +rec.price +' บาท ' +'</p></a>'+'</l>';
           } else {
             searchContent += '<li>' + '<a href = "#" onclick="pay(' + i + ');">' +'<h3 class = "ui-li-heading">' + car_date + '</h3>' + '<p class = "ui-li-desc">' +'ชื่อ'+ rec.namepc + ' เบอร์โทรศัพท์ ' +rec.numpc+' ยี่ห้อ ' +rec.brand + ' รุ่น ' +rec.gen +'<br>'+' สี ' +rec.corc +' เลขทะเบียน ' +rec.numc +' ราคาจำนำ ' +rec.price +' บาท ' +'</p></a>'+'</l>';
           }
           rows.push(rec);
         }
         $("#searchCar").append(searchContent);
         $("#searchCar").listview().listview("refresh");
         $.mobile.changePage("#searchAllCar",{transition: "slide"});
       }
        var indexEdit;
       function Edit(index){
         $("#editcarid").val(rows[index].id);
         var car_date = new Date(Number(rows[index].car_date));
           indexEdit = car_date;
         car_date = (car_date.getMonth()+1)+"/"+car_date.getDate()+"/"+car_date.getFullYear();
         $("#editcardate").val(car_date);
         $("#editnamepc").val(rows[index].namepc);
                   $("#editnumpc").val(rows[index].numpc);
                   $("#editaddpc").val(rows[index].addpc);
                   $("#editpicUrl").val(rows[index].pic_url);
                   $("#editbrand").val(rows[index].brand);
                   $("#editgen").val(rows[index].gen);
                   $("#editcorc").val(rows[index].corc);
                   $("#edityout").val(rows[index].yout);
                   $("#editnumc").val(rows[index].numc);
                   $("#editprice").val(rows[index].price);
                   $("#editpicUrl1").val(rows[index].pic_url1);
                   $("#editpicUrl2").val(rows[index].pic_url2);
                   $("#editpicUrl3").val(rows[index].pic_url3);
                   $("#editpicUrl4").val(rows[index].pic_url4);
                   $("#editpicUrl5").val(rows[index].pic_url5);
                   $.mobile.changePage("#Edit");
               }

               function Update(){
                   var id = $("#editcarid").val();
                   var cnamepc = $("#editnamepc").val();
                   var cnumpc = $("#editnumpc").val();
                   var caddpc = $("#editaddpc").val();
                   var cpic = $("#editpicUrl").val();
                   var cbrand = $("#editbrand").val();
                   var cgen = $("#editgen").val();
                   var ccorc = $("#editcorc").val();
                   var cyout = $("#edityout").val();
                   var cnumc = $("#editnumc").val();
                   var date = indexEdit.getTime();
                   var cprice = $("#editprice").val();
                   var cpic1 = $("#editpicUrl1").val();
                   var cpic2 = $("#editpicUrl2").val();
                   var cpic3 = $("#editpicUrl3").val();
                   var cpic4 = $("#editpicUrl4").val();
                   var cpic5 = $("#editpicUrl5").val();
                   console.log("cnamepc " + cnamepc);
                   console.log("cnumpc " + cnumpc);
                   console.log("caddpc " + caddpc);
                   console.log("cpic " + cpic);
                   console.log("cbrand " + cbrand);
                   console.log("cgen " + cgen);
                   console.log("ccorc " + ccorc);
                   console.log("cyout " + cyout);
                   if (cnamepc == "" || cnumpc == "" || caddpc == "" || cpic == "" || cbrand == "" || cgen == "" || ccorc == "" || cyout == "") {
                     alert("กรุณากรอกข้อมูลให้ครบถ้วน");
                   } else if (cnumc == "" || date == "" || cprice == "" || cpic1 == "" || cpic2 == "" || cpic3 == "" || cpic4 == "" || cpic5 == "") {
                     alert("กรุณากรอกข้อมูลให้ครบถ้วน");
                   } else {
                     console.log("before db update");
                     db.transaction(function(tx) {
                         tx.executeSql("UPDATE tbCar SET namepc=?, numpc=?,addpc=?,pic_url=?, brand=?, gen=?, corc=?,yout=?, numc=?, car_date=?, price=?,pic_url1=? ,pic_url2=? ,pic_url3=?,pic_url4=?,pic_url5=? WHERE id=?", [cnamepc,cnumpc,caddpc,cpic,cbrand,cgen,ccorc,cyout,cnumc,date,cprice,cpic1,cpic2,cpic3,cpic4,cpic5,id], function(tx, result) {
                             alert("Update Success");
                             console.log("after db update success");
                             listCar();
                         }, _onError);
                     }, _onError);
                   }
                 }

               function pay(index){
                 indexUpdatePay = rows[index];
                   $("pcarid").val(rows[index].id);
                   $("#pcardate").val((currentDate.getMonth()+1)+"/"+currentDate.getDate()+"/"+currentDate.getFullYear());
                   $("#pnumc").val(rows[index].numc);
                   $("#pprice").val(rows[index].price);
                   $("#pitotal").val(rows[index].itotal);
                   $.mobile.changePage("#pay");
                 }

               function pcar(index){
                 var car_date = new Date(Number(rows[index].car_date));
                 car_date = (car_date.getMonth()+1)+"/"+car_date.getDate()+"/"+car_date.getFullYear();
                   $("#scarid").val(rows[index].id);
                   $("#scardate").val(car_date);
                   $("#snamepc").val(rows[index].namepc);
                   $("#sbrand").val(rows[index].brand);
                   $("#sgen").val(rows[index].gen);
                   $("#scorc").val(rows[index].corc);
                   $("#syout").val(rows[index].yout);
                   $("#snumc").val(rows[index].numc);
                   $("#sprice").val(rows[index].price);
                   $("#sitotal").val(rows[index].itotal);
                   var chack = rows[index].chack;
                   var no_chack = rows[index].no_chack;
                   $("#totalPoint").val(0);
                   if (chack == 1) {
                    $("#schack").val("จ่ายเฉพาะดอกเบี้ย");
                   } else if (chack == 2) {
                    $("#schack").val("จ่ายเงินต้นรวมดอกเบี้ย");
                   } else if (chack == 3) {
                     if (no_chack == 4) {
                       alert("ครบกำหนดรถหลุดจำนำ แจ้งเจ้าของรถ");
                     }
                     $("#totalPoint").val(no_chack*rows[index].itotal);
                    $("#schack").val("ขาดจ่ายดอกเบี้ย จำนวน " + no_chack + " ครั้ง");
                   } else {
                    $("#schack").val("ยังไม่มีการชำระเงิน");
                   }
                   $("#spicUrl1").attr("src",rows[index].pic_url1);
                   $("#spicUrl2").attr("src",rows[index].pic_url2);
                   $("#spicUrl3").attr("src",rows[index].pic_url3);
                   $("#spicUrl4").attr("src",rows[index].pic_url4);
                   $("#spicUrl5").attr("src",rows[index].pic_url5);
                   $.mobile.changePage("#pcar");
               }
               function puser(index){
                   $("#suserid").val(rows[index].id);
                   $("#snamePC").val(rows[index].namepc);
                   $("#snumpc").val(rows[index].numpc);
                   $("#saddpc").val(rows[index].addpc);
                   $("#spicUrl").attr("src",rows[index].pic_url);
                   $.mobile.changePage("#puser");
               }
               var indexUpdatePay;
               function updatePay(){
                var chack = $("#chack").val();
                var inputSql = [];
                var sql;
                var payDate = new Date(Number(indexUpdatePay.payDate));
                   var assignDate = new Date(Number(indexUpdatePay.payDate));
                   console.log(indexUpdatePay.payDate);
                payDate = payDate.getTime();
                payDate = payDate + 2592000000;
                var newPayDate = new Date(payDate);

                newPayDate = newPayDate.getTime();
                var paySql;
                   var inputPaySql;
                   var currentDate = new Date();
                   currentDate = currentDate.getTime();
                if (chack == 3) {
                  var no_chack = indexUpdatePay.no_chack + 1;
                  sql = "UPDATE tbCar SET chack = ? , no_chack = ? , payDate = ? WHERE numc = ?";
                  inputSql = [chack,no_chack,newPayDate,indexUpdatePay.numc];
                } else {
                  sql = "UPDATE tbCar SET chack = ? , no_chack = 0 , payDate = ? WHERE numc = ?";
                  inputSql = [chack,newPayDate,indexUpdatePay.numc];
                }
                   paySql = "insert into tbPay (carId,payDate,assignDate,chack) values (?,?,?,?)";
                    inputPaySql = [indexUpdatePay.id,currentDate,(assignDate.getMonth()+1),chack];
                   console.log("test");
                db.transaction(function(tx){
                  tx.executeSql(sql,inputSql,function(tx,result){
                    alert("Update Success");
                    $.mobile.changePage("#main");
                  });
                    tx.executeSql(paySql,inputPaySql,function(){
                        console.log("paySql");
                    });
                },_onError);
               }

               function checkTel(item){
                 var val = $(item).val();
                 console.log('val = ' + val);
                 if (!$.isNumeric(val) && val != "") {
                   alert("กรุณากรอกเป็นตัวเลข");
                   $(item).val(val.substring(0,val.length-1));
                 } else if (val.charAt(0) != 0) {
                   alert('เบอร์โทรศัพต้องขึ้นต้นด้วย 0');
                   $(item).val(0);
                 }
               }

               function checkNum(item){
                  var _val = $(item).val();
                  if (!$.isNumeric(_val)) {
                    alert("กรุณากรอกเป็นตัวเลข");
                    $(item).val("");
                  }
               }

               function checkChar(item){
                  var _val = $(item).val();
                  if ($.isNumeric(_val[_val.length-1])) {
                    alert("กรุณากรอกเป็นตัวอักษร");
                    $(item).val(_val.substring(0,_val.length-1));
                  }
               }

               var currentDate = new Date();
               var timeDate = currentDate.getTime();
               function prepareInsert(){
                 console.log("prepateInsert");
                 currentYear = currentDate.getFullYear();
                 var currentDay = (currentDate.getMonth()+1)+"/"+currentDate.getDate()+"/"+currentYear;
                 $("#cardate").val(currentDay);
                 var optionContent = "";
                 $("#yout").empty();
                 for (var i=0;i<20;i++) {
                    optionContent += "<option>"+(currentYear-i)+"</option>";
                 }
                 $("#yout").append(optionContent);
                 console.log("prepareInsert Success");
                 $.mobile.changePage("#insc");
               }

               function checkDate(item){
                 var selectDate = new Date($(item).val());
                 timeSelectDate = selectDate.getTime();
                 if (timeSelectDate>timeDate) {
                   alert("เลือกวันไม่ถูกต้อง");
                   $(item).val("");
                 }
               }

               var alphabet = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];

               function checkThai(item){
                 console.log("checkThai");
                 alphabet.forEach(function(itemValue,index){
                   var oneItem = $(item).val();
                   oneItem = oneItem.charAt(oneItem.length-1)
                   if (oneItem.toLowerCase() == itemValue) {
                     alert("รุ่นรถไม่สามารถพิมภาษาอังกฤษได้");
                     $(item).val($(item).val().substring(0,$(item).val().length-1));
                   }
                 });
                 console.log("checkThai Success");
               }

               function prepareSearch(){
                 console.log("prepareSearch");
                 $("#searchNumC").val("");
                 db.transaction(function(tx){
                   var sql = "select * from tbCar";
                   tx.executeSql(sql,[],function(tx,result){
                     $("#listSearch").empty();
                     console.log("prepare search result");
                     var content = "";
                     for (var i=0;i<result.rows.length;i++) {
                       var rec = result.rows.item(i);
                       content += "<li><a href='#' onclick='fullAuto(\""+rec.numc+"\")'>"+rec.numc+"</a></li>";
                     }
                     console.log(content);
                     $("#listSearch").append(content);
                     $("#listSearch").listview().listview("refresh");
                     $.mobile.changePage("#search");
                   });
                 });
               }

               function fullAuto(text){
                 $("#searchNumC").val(text);
                 searchCar();
               }

        function listPay(){
            $("#searchPayTable").val("");
                 db.transaction(function(tx){
                   var sql = "select * from tbCar";
                   tx.executeSql(sql,[],function(tx,result){
                     $("#listSearchPayTable").empty();
                     console.log("prepare search result");
                     var content = "";
                     for (var i=0;i<result.rows.length;i++) {
                       var rec = result.rows.item(i);
                       content += "<li><a href='#' onclick='fullAutoPayTable("+rec.id+")'>"+rec.numc+"</a></li>";
                     }
                     console.log(content);
                     $("#listSearchPayTable").append(content);
                     $("#listSearchPayTable").listview().listview("refresh");
                     $.mobile.changePage("#listPay");
                   });
                 });
        }

        function fullAutoPayTable(id) {
            db.transaction(function(tx){
               var sql = "select * from tbPay where carId = ? order by payDate";
                tx.executeSql(sql,[id],function(tx,result){
                   var content = "";
                    var len = result.rows.length;
                    var no_chack = 0;
                    for (var i=0;i,i<len;i++) {
                        var rec = result.rows.item(i);
                        content += "<tr>"+
                            "<td>"+(i+1)+
                            "</td>";
                        if (rec.assignDate == 1) {
                            content += "<td>มกราคม</td>";
                        } else if (rec.assignDate == 2) {
                            content += "<td>กุมภาพันธ์</td>";
                        } else if (rec.assignDate == 3 ) {
                            content += "<td>มีนาคม</td>";
                        } else if (rec.assignDate == 4) {
                            content += "<td>เมษายน</td>";
                        } else if (rec.assignDate == 5) {
                            content += "<td>พฤษภาคม</td>";
                        } else if (rec.assignDate == 6) {
                            content += "<td>มิถุนายน</td>";
                        } else if (rec.assignDate == 7) {
                            content += "<td>กรกฏาคม</td>";
                        } else if (rec.assignDate == 8) {
                            content += "<td>สิงหาคม</td>";
                        } else if (rec.assignDate == 9) {
                            content += "<td>กันยายน</td>";
                        } else if (rec.assignDate == 10) {
                            content += "<td>ตุลาคม</td>";
                        } else if (rec.assignDate == 11) {
                            content += "<td>พฤศจิกายน</td>";
                        } else if (rec.assignDate == 12) {
                            content += "<td>ธันวาคม</td>";
                        }
                        var payDateNow = new Date(Number(rec.payDate));
                        content += "<td>"+
                            (payDateNow.getMonth()+1)+"/"+payDateNow.getDate()+"/"+payDateNow.getFullYear()+
                            "</td>";
                        if (rec.chack == 1) {
                            content += "<td>จ่ายเฉพาะดอกเบี้ย"+"</td>";
                            no_chack = 0;
                        } else if(rec.chack == 2) {
                            content += "<td>จ่ายทั้งต้นและดอก"+"</td>";
                            no_chack = 0;
                        } else if(rec.chack == 3 && no_chack < 3) {
                            content += "<td>ขาดจ่าย"+"</td>";
                            no_chack += 1;
                        } else if(rec.chack == 3 && no_chack >= 3) {
                            content += "<td>ยึดรถ</td>";
                        }
                            content += "</tr>";
                    }
                    $("#bodyShowPay").html(content);
                    $.mobile.changePage("#showPayTable");
                });
            });
        }
    </script>
    <title>The Garage</title>
</head>

<body>
    <div data-role="page" id="main" style="background: #330000">
        <div data-role="header">
            <h3>WELCOME</h3>
        </div>
         <div data-role="content" >
             <marquee><img src=img/01.gif width=150 height=75></marquee>
             <a data-role="button" href="#" onclick="prepareInsert();" data-theme="e">เพิ่มข้อมูล</a>
             <a data-role="button" href="#" onclick="prepareSearch();" data-theme="g">จ่ายเงิน</a>
             <a data-role="button" href="#" data-theme="f" onClick="listCars()">ดูข้อมูลรถ</a>
             <a data-role="button" href="#" data-theme="h" onClick="listUsers()">ดูข้อมูลเจ้าของรถ</a>
             <a data-role="button" href="#" data-theme="h" onclick="listPay();">ตารางชำระเงิน</a>
        </div>
        <div data-role="footer" data-position="fixed">
            <center><h3>Copyright(c) by cs-kps</h3></center>
        </div>
    </div>

    <div data-role="page" id="listPay">
        <div data-role="header">
            <h3>ค้นหารถ</h3>
        </div>
        <div data-role="content">
            <form class="ui-filterable">
             <input id="searchPayTable" data-type="search" placeholder="กรุณาระบุเลขทะเบียนรถ" type="text" maxlength="7">
           </form>
           <ul data-role="listview" data-inset="true" data-filter="true" data-filter-reveal="true" data-input="#searchPayTable" id="listSearchPayTable">

           </ul>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a href="#" data-role="button" data-rel="back">back</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div data-role="page" id="showPayTable">
        <div data-role="header">
            <h3>ตารางชำระเงิน</h3>
        </div>
        <div data-role="content">
            <table>
                <thead>
                    <tr>
                        <th>งวด</th>
                        <th>เดือน</th>
                        <th>วันที่จ่าย</th>
                        <th>ประเภทการจ่าย</th>
                    </tr>
                </thead>
                <tbody id="bodyShowPay">

                </tbody>
            </table>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                    <li><a data-role="button" data-rel="back">back</a></li>
                </ul>
            </div>
        </div>
    </div>

    <div data-role="page" id="insc" style="background: #330000">
        <div data-role="header">
            <h3>ข้อมูลเจ้าของรถ</h3>
        </div>
         <div data-role="content">
             <div class="bgSlider"><div class="Slider ui-draggable" style="left: 0px; top: 0px;"></div></div>
             <FONT COLOR=#F8F8FF>
             <label>วันรับรถเข้า</label>
             <input name="cardate" id="cardate" type="text" placeholder="กรุณาระบุวันที่" data-inline="false" readonly="true">
             <label>ชื่อผู้ทำการจำนำ</label>
             <input name="namepc" id="namepc" type="text" placeholder="กรุณาระบุชื่อและนามสกุล" onkeyup="checkChar(this);">
             <label>เบอร์โทรศัพท์ผู้ทำการจำนำ</label>
             <input name="numpc" id="numpc" type="text" maxlength="10" onkeyup="checkTel(this);" placeholder="กรุณาระบุเบอร์โทรศัพท์">
             <label>ที่อยู่ผู้ทำการจำนำ</label>
             <input name="addpc" id="addpc" type="text" placeholder="กรุณาระบุบ้านเลขที่ ตำบล อำเภอ จังหวัด และรหัสไปรษณีย์">
             <label>รูปบัตรประชาชนเจ้าของรถ</label>
             <div class ="ui-grid-a">
                <div class="ui-block-a">
                    <input name="picUrl" id="picUrl" type="text" placeholder="" readonly>
                </div>
                <div class="ui-block-b">
                    <a href="#" onclick="browsePhoto('#picUrl');" data-role="button">Select Photo</a>
                </div>
            </div>
             <center><label>ข้อมูลรถ</label></center>
             <label>ยี่ห้อรถ</label>
             <input name="brand" id="brand" type="text" placeholder="กรุณาระบุยี่ห้อของรถ" onkeyup="checkChar(this);">
             <label>รุ่นของรถ</label>
             <input name="gen" id="gen" type="text" placeholder="กรุณาระบุรุ่นของรถ">
             <label>สีรถ</label>
             <input name="corc" id="corc" type="text" placeholder="กรุณาระบุสีของรถ" onkeyup="checkChar(this);">
             <label>ปีที่ออกรถ</label>
             <select name="yout" id="yout"></select>
             <label>เลขทะเบียนรถ</label>
             <input name="numc" id="numc" type="text" placeholder="กรุณาระบุเลขทะเบียนของรถ" maxlength="7" onkeyup="checkThai(this)">
             <label>ราคาจำนำรถ (บาท)</label>
             <input name="price" id="price" type="number" onkeyup="calPrice(this,'#itotal');" placeholder="กรุณาระบุราคาจำนำรถ" min="1">
             <label>ค่าดอกเบี้ย/เดือน (บาท)</label>
             <input  id="itotal" type="number" readonly>
             <label>รูปรถจำนำ</label>
             <div class ="ui-grid-a">
                <div class="ui-block-a">
                    <input name="picUrl1" id="picUrl1" type="text" placeholder="" readonly>
                </div>
                <div class="ui-block-b">
                    <a href="#" onclick="browsePhoto('#picUrl1');" data-role="button">Select Photo</a>
                </div>
            </div>
             <div class ="ui-grid-a">
                <div class="ui-block-a">
                    <input name="picUrl2" id="picUrl2" type="text" placeholder="" readonly>
                </div>
                <div class="ui-block-b">
                    <a href="#" onclick="browsePhoto('#picUrl2');" data-role="button">Select Photo</a>
                </div>
            </div>
            <div class ="ui-grid-a">
                <div class="ui-block-a">
                    <input name="picUrl3" id="picUrl3" type="text" placeholder="" readonly>
                </div>
                <div class="ui-block-b">
                    <a href="#" onclick="browsePhoto('#picUrl3');" data-role="button">Select Photo</a>
                </div>
            </div>
            <div class ="ui-grid-a">
                <div class="ui-block-a">
                    <input name="picUrl4" id="picUrl4" type="text" placeholder="" readonly>
                </div>
                <div class="ui-block-b">
                    <a href="#" onclick="browsePhoto('#picUrl4');" data-role="button">Select Photo</a>
                </div>
            </div>
            <div class ="ui-grid-a">
                <div class="ui-block-a">
                    <input name="picUrl5" id="picUrl5" type="text" placeholder="" readonly>
                </div>
                <div class="ui-block-b">
                    <a href="#" onclick="browsePhoto('#picUrl5');" data-role="button">Select Photo</a>
                </div>
            </div>
             </FONT>
        </div>
         <div data-role="footer" data-position="fixed">
             <div data-role="navbar">
                 <ul>
                     <li>
                         <a href="#" onclick="insertNewUser();" data-icon="plus">Insert</a>
                     </li>
                     <li>
                         <a href="#" onclick="listCar();" data-icon="bullets">Edit</a>
                     </li>
                     <li>
                         <a href="#main" data-role="back" data-icon="back" class="ui-btn">BACK</a>
                     </li>
                 </ul>
             </div>
        </div>
    </div>
    <!--จ่ายตัง -->
        <div data-role="page" id="pay" style="background: #330000">
        <div data-role="header">
            <h3>Pay</h3>
        </div>
         <div data-role="content">
             <div class="bgSlider"><div class="Slider ui-draggable" style="left: 0px; top: 0px;"></div></div>
             <FONT COLOR=#F8F8FF>
             <label>วันจ่ายเงิน</label>
             <input name="pcardate" id="pcardate" type="text" placeholder="กรุณาระบุวันที่" readonly="true">
             <label>เลขทะเบียนรถ</label>
             <input name="pnumc" id="pnumc" type="text">
             <label>ราคาจำนำรถ (บาท)</label>
             <input name="pprice" id="pprice" type="number" onkeyup="">
             <label>ค่าดอกเบี้ย/เดือน (บาท)</label>
             <input  name = "pitotal" id="pitotal" type="number" readonly>
             <label>ลักษณะการชำระเงิน</label>
             <select name="chack" id="chack">
               <option value="1">จ่ายเฉพาะดอกเบี้ย</option>
               <option value="2">จ่ายเงินต้นรวมดอกเบี้ย</option>
               <option value="3">ขาดการจ่ายดอกเบี้ย</option>
             </select>
             </FONT>
        </div>
         <div data-role="footer" data-position="fixed">
             <div data-role="navbar">
                 <ul>
                     <li>
                         <a href="#" onclick="updatePay();" data-icon="plus">Insert</a>
                     </li>
                     <li>
                         <a href="#ALLcar" onclick="listCar();" data-icon="bullets">Edit</a>
                     </li>
                     <li>
                         <a href="#main" data-role="back" data-icon="back" class="ui-btn">BACK</a>
                     </li>
                 </ul>
             </div>
        </div>
    </div>
    <!--view-->
    <div data-role="page" id="ALLcar" style="background: #330000">
        <div data-role="header">
            <h3>ข้อมูลรถ</h3><br>
        </div>
        <div data-role="content">

            <div id="listArea">
                <ul id="listCar" data-role="listview">

                </ul>
            </div>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                  <li><a href="#insc" data-role="back" data-icon="back" class="ui-btn">BACK</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!--ค้นหา-->
    <div data-role="page" id="search" style="background: #330000">
        <div data-role="header">
            <h3>เลขทะเบียนรถ</h3>
          </div>
         <div data-role="content">
           <form class="ui-filterable">
             <input id="searchNumC" data-type="search" placeholder="กรุณาระบุเลขทะเบียนรถ" type="text" maxlength="7">
           </form>
           <ul data-role="listview" data-inset="true" data-filter="true" data-filter-reveal="true" data-input="#searchNumC" id="listSearch">

           </ul>
        </div>
         <div data-role="footer" data-position="fixed">
             <div data-role="navbar">
                 <ul>
                     <li>
                         <a href="#" onclick="searchCar();" data-icon="search">Search</a>
                     </li>
                     <li>
                         <a href="#main" data-icon="back">BACK</a>
                     </li>
                 </ul>
             </div>
        </div>
    </div>
    <!--    แสดงผลค้นหา-->
    <div data-role="page" id="searchAllCar" style="background: #330000">
        <div data-role="header">
            <center> <h3>List of Car</h3></center>
        </div>
        <div data-role="content">

            <div id="searchArea">
                <ul id="searchCar" data-role="listview">

                </ul>
            </div>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                  <li><a href="#search" data-role="back" data-icon="back" class="ui-btn">BACK</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!--edit-->
    <div data-role="page" id="Edit" style="background: #330000">
        <div data-role="header">
            <h3>แก้ไขข้อมูล</h3>
        </div>
         <div data-role="content">
            <div class="bgSlider"><div class="Slider ui-draggable" style="left: 0px; top: 0px;"></div></div>
             <input name="editcarid" id="editcarid" type="hidden" >
             <FONT COLOR=#F8F8FF>
             <label>วันรับรถเข้า</label>
             <input name="cardate" id="editcardate" type="text" placeholder="กรุณาระบุวันที่" data-inline="false" data-role="date" readonly="true">
             <label>ชื่อเจ้าของรถ</label>
             <input name="editnamepc" id="editnamepc" type="text" placeholder="กรุณาระบุชื่อและนามสกุล"i onkeyup="checkChar(this);">
             <label>เบอร์โทรศัพท์ผู้ทำการจำนำ</label>
             <input name="editnumpc" maxlength="10" id="editnumpc" type="text" placeholder="กรุณาระบุเบอร์โทรศัพท์" onkeyup="checkTel(this);">
             <label>ที่อยู่ผู้ทำการจำนำ</label>
             <input name="editaddpc" id="editaddpc" type="text" placeholder="กรุณาระบุบ้านเลขที่ ตำบล อำเภอ จังหวัด และรหัสไปรษณีย์">
             <label>รูปบัตรประชาชนเจ้าของรถ</label>
             <div class ="ui-grid-a">
                <div class="ui-block-a">
                    <input name="editpicUrl" id="editpicUrl" type="text" placeholder="" readonly>
                </div>
                <div class="ui-block-b">
                    <a href="#" onclick="browsePhoto('#editpicUrl');" data-role="button">Select Photo</a>
                </div>
            </div>
             <center><label>ข้อมูลรถ</label></center>
             <label>ยี่ห้อรถ</label>
             <input name="editbrand" id="editbrand" type="text" placeholder="กรุณาระบุยี่ห้อของรถ" onkeyup="checkChar(this);">
             <label>รุ่นของรถ</label>
             <input name="editgen" id="editgen" type="text" placeholder="กรุณาระบุรุ่นของรถ" onkeyup="checkChar(this);">
             <label>สีรถ</label>
             <input name="editcorc" id="editcorc" type="text" placeholder="กรุณาระบุสีของรถ" onkeyup="checkChar(this);">
             <label>ปีที่ออกรถ</label>
             <input name="edityout" id="edityout" type="text" placeholder="กรุณาระบุปีที่ออกรถ" maxlength="4" onkeyup="checkNum(this);">
             <label>เลขทะเบียนรถ</label>
             <input name="editnumc" id="editnumc" type="text" placeholder="กรุณาระบุเลขทะเบียนของรถ" maxlength="7">
             <label>ราคาจำนำรถ</label>
             <input name="editprice" id="editprice" type="number" placeholder="กรุณาระบุราคาจำนำรถ" onkeyup="calPrice(this,'#');">
             <div class ="ui-grid-a">
                <div class="ui-block-a">
                    <input name="editpicUrl1" id="editpicUrl1" type="text" placeholder="" readonly>
                </div>
                <div class="ui-block-b">
                    <a href="#" onclick="browsePhoto('#editpicUrl1');" data-role="button">Select Photo</a>
                </div>
            </div>
            <div class ="ui-grid-a">
                <div class="ui-block-a">
                    <input name="editpicUrl2" id="editpicUrl2" type="text" placeholder="" readonly>
                </div>
                <div class="ui-block-b">
                    <a href="#" onclick="browsePhoto('#editpicUrl2');" data-role="button">Select Photo</a>
                </div>
            </div>
            <div class ="ui-grid-a">
                <div class="ui-block-a">
                    <input name="editpicUrl3" id="editpicUrl3" type="text" placeholder="" readonly>
                </div>
                <div class="ui-block-b">
                    <a href="#" onclick="browsePhoto('#editpicUrl3');" data-role="button">Select Photo</a>
                </div>
            </div>
            <div class ="ui-grid-a">
                <div class="ui-block-a">
                    <input name="editpicUrl4" id="editpicUrl4" type="text" placeholder="" readonly>
                </div>
                <div class="ui-block-b">
                    <a href="#" onclick="browsePhoto('#editpicUrl4');" data-role="button">Select Photo</a>
                </div>
            </div>
            <div class ="ui-grid-a">
                <div class="ui-block-a">
                    <input name="editpicUrl5" id="editpicUrl5" type="text" placeholder="" readonly>
                </div>
                <div class="ui-block-b">
                    <a href="#" onclick="browsePhoto('#editpicUrl5');" data-role="button">Select Photo</a>
                </div>
            </div>
             </FONT>
        </div>
         <div data-role="footer" data-position="fixed">
             <div data-role="navbar">
                 <ul>
                     <li>
                         <a href="#" onclick="Update();" data-icon="check">Update</a>
                     </li>
                     <li>
                          <a href="#insc" data-icon="back">BACK</a>
                     </li>
                 </ul>
             </div>
        </div>
    </div>
    <div data-role="page" id="previewcar" style="background: #330000">
        <div data-role="header">
            <center> <h3>ข้อมูลรถที่มีในคลัง</h3></center>
        </div>
        <div data-role="content">
           <div id="listArea">
                <ul id="listCars" data-role="listview">

                </ul>
            </div>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                  <li><a href="#main" data-role="back" data-icon="back" class="ui-btn">BACK</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div data-role="page" id="previewuser" style="background: #330000">
        <div data-role="header">
            <center> <h3>ข้อมูลเจ้าของรถที่มีในคลัง</h3></center>
        </div>
        <div data-role="content">
           <div id="listArea">
                <ul id="listUsers" data-role="listview">

                </ul>
            </div>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                  <li><a href="#main" data-role="back" data-icon="back" class="ui-btn">BACK</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!--ข้อมูลรถ-->
    <div data-role="page" id="pcar" style="background: #330000">
        <div data-role="header">
            <center> <h3>ข้อมูลรถ</h3></center>
        </div>
       <div data-role="content">
            <div class="bgSlider"><div class="Slider ui-draggable" style="left: 0px; top: 0px;"></div></div>
             <input name="scarid" id="scarid" type="hidden" >
             <FONT COLOR=#F8F8FF>
             <label>วันรับรถเข้า</label>
             <input name="scardate" id="scardate" type="text" data-inline="false"  readonly="true">
             <label>ชื่อเจ้าของรถ</label>
             <input name="snamepc" id="snamepc" type="text" readonly="true">
             <label>ยี่ห้อรถ</label>
             <input name="sbrand" id="sbrand" type="text" readonly="true">
             <label>รุ่นของรถ</label>
             <input name="sgen" id="sgen" type="text" readonly="true">
             <label>สีรถ</label>
             <input name="scorc" id="scorc" type="text" readonly="true">
             <label>เลขทะเบียนรถ</label>
             <input name="snumc" id="snumc" type="text" readonly="true">
             <label>ราคาจำนำรถ</label>
             <input name="sprice" id="sprice" type="number" readonly="true" onkeyup="calPrice()">
             <label>ค่าดอกเบี้ยต่อเดือน/เดือน (บาท)</label>
             <input name="sitotal" id="sitotal" type="number" readonly onkeyup="">
             <label for="">ดอกเบี้ยรวม</label>
             <input type="number" id="totalPoint" readonly value="">
             <label>ลักษณะการชำระเงิน</label>
             <input name="schack" id="schack" type="text" readonly >
             <center><img src="" id="spicUrl1" hight="300" width="200"></center> <br />
             <center><img src="" id="spicUrl2" hight="300" width="200"></center> <br />
             <center><img src="" id="spicUrl3" hight="300" width="200"></center> <br />
             <center><img src="" id="spicUrl4" hight="300" width="200"></center> <br />
             <center><img src="" id="spicUrl5" hight="300" width="200"></center>
             </FONT>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                  <li><a href="#previewcar" data-role="back" data-icon="back" class="ui-btn">BACK</a></li>
                </ul>
            </div>
        </div>
    </div>

    <!--ข้อมูลเจ้าของรถ-->
    <div data-role="page" id="puser" style="background: #330000">
        <div data-role="header">
            <center> <h3>ข้อมูลเจ้าของ</h3></center>
        </div>
       <div data-role="content">
            <div class="bgSlider"><div class="Slider ui-draggable" style="left: 0px; top: 0px;"></div></div>
             <input name="suserid" id="scarid" type="hidden" >
             <FONT COLOR=#F8F8FF>
             <label>ชื่อเจ้าของรถ</label>
             <input name="snamepc" id="snamePC" type="text" readonly="true">
             <label>เบอร์โทรศัพท์ผู้ทำการจำนำ</label>
             <input name="snumpc" id="snumpc" type="text" readonly="true">
             <label>ที่อยู่ผู้ทำการจำนำ</label>
             <input name="saddpc" id="saddpc" type="text" readonly="true">
             <center><img src="" id="spicUrl" hight="300" width="200"></center>
             </FONT>
        </div>
        <div data-role="footer" data-position="fixed">
            <div data-role="navbar">
                <ul>
                  <li><a href="#previewuser" data-role="back" data-icon="back" class="ui-btn">BACK</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div data-role ="page" id="help" style="background: #330000">
        <div data-role="header">
            <center><h3>ช่วยเหลือ</h3></center>
        </div>
        <div data-role="content">
            <FONT COLOR=#F8F8FF>
              <center><label><h1>เริ่มต้มใช้งาน</h1></label></center>
            <center> หน้าแรกมีทั้งหมด 2 ปุ่ม คือ ข้อมูลรถ และ ค้นหาข้อมูล</center>
            <center> ปุ่มค้นหาข้อมูลจะค้นหาข้อมูลรถจากข้อมูลที่ได้ลงทะเบียนไว้</center>
            <center> ผู้ใช้งานครั้งแรก กดที่ปุ่ม "ข้อมูลรถ"</center>
            <center> จะพบ 2 ปุ่ม</center>
            <center> 1.ข้อมูลรถในคลัง</center>
            <center> 2.เพิ่มข้อมูลรถ</center>
            <center> เมื่อกดข้อมูลนถในคลัง จะแสดงรายการรถทั้งหมดที่รับจำนำ</center>
            <center> เมื่อกดเพิ่มข้อมูลรถ จะมีตารางให้ใส่ข้อมูลต่างๆเกี่ยวกับรถที่จะนำเข้า</center>
            <center> เมื่อใ่ข้อมูลครบทั้งหมดให้กดปุ่ม Insert จะเป็นการบันทึกข้อมูลไว้ในระบบ</center>
            <center> ปุ่ม View เอาไว้เปิดดูรายการรถทั้งหมด</center>
            </FONT>

        </div>
       <div data-role="footer" data-position="fixed">
            <center><h3>Copyright(c) by cs-kps</h3></center>
        </div>
    </div>
    <div data-role ="page" id="about" style="background: #330000">
        <div data-role="header">
            <center><h3>เกี่ยวกับ</h3></center>

        </div>
        <div data-role="content">
            <FONT COLOR=#F8F8FF>
                <center><h3>คณะผู้จัดทำ</h3></center>

                <center><img src = "img/03.jpg" width = "200" heinght ="300" ></center>
                <center><p>นาย สิทธิกร โกสุมภ์ 5721656026 หมู่ 800</p></center>
                <center><p>มหาวิทยาลัยเกษตรศาสตร์ วิทยาเขต กำแพงแสน <br>
                คณะ ศิลปศาสตร์ และ วิทยาศาสตร์ สาขา วิทยาการคอมพิวเตอร์ <br></p></center>
            </FONT>
        </div>
       <div data-role="footer" data-position="fixed">
            <center><h3>Copyright(c) by cs-kps</h3></center>
        </div>
    </div>
</body>

</html>
